@page "{playerId:Guid?}"
@using Ui.Translations
@model Pages.PlayerModel

<div class="my-2 my-lg-0 p-3 ml-auto">
    <h3>@Model.Player.Name (Lvl: @Model.Player.Level)</h3>
    <h3>SSP: @Model.Player.StarPlayerPoints</h3>
    <h3>Skills: @string.Join(',', Model.Player.Skills.Select(s => RaceTranslations.ResourceManager.GetString($"Skill_{s}")))</h3>
    @if (Model.Player.HasFreeSkill)
    {
        <h5>Player has a free skill point of: @string.Join(',', Model.Player.FreeSkillPoints.Select(s => RaceTranslations.ResourceManager.GetString($"FreeSkillPoint_{s.ToString()}")))</h5>
        <form method="post" asp-page-handler="ChooseSkill">
            <div class="form-group">
                <select class="form-control" id="skillSelectBox" name="skillId">
                    @foreach (var skill in Model.RelevantSkills)
                    {
                        <option value="@skill.SkillId">
                            @RaceTranslations.ResourceManager.GetString($"Skill_{skill.SkillId}")
                            @{
                                var value = RaceTranslations.ResourceManager.GetString($"SkillType_{skill.SkillType.ToString()}");
                                if (value != null)
                                {
                                    value = $"({value})";
                                }
                            }
                            @value
                        </option>
                    }
                </select>
            </div>
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Level up Player!</button>
        </form>
    }

    @if (Model.Player.CanRegisterLevelUpSkillPointRoll)
        {
            <h5>Player can register a free skill point</h5>
            <form method="post" asp-page-handler="RegisterLevelUpSkillPointRoll">
                <div class="form-group">
                    <select class="form-control" id="skillSelectBox" name="freeSkillType">
                        @foreach (var skill in Model.ChoosableSkills)
                        {
                            <option value="@skill">
                                @RaceTranslations.ResourceManager.GetString($"FreeSkillPoint_{skill}")
                            </option>
                        }
                    </select>
                </div>
                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Level up Player!</button>
            </form>
        }
 </div>